<!DOCTYPE html>
<html lang="en">
<head>
	<title>ETI Revenue Share Inventory</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->	
	<link rel="icon" type="image/png" href="images/icons/favicon2.ico"/>
<!--===============================================================================================-->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous">
	<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/css/bootstrap-select.min.css" integrity="sha512-ARJR74swou2y0Q2V9k0GbzQ/5vJ2RBSoCWokg4zkfM29Fb3vZEQyv0iWBMW/yvKgyHSR/7D64pFMmU8nYmbRkg==" crossorigin="anonymous" /> -->
	<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
<!--===============================================================================================-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
<!--===============================================================================================-->
	<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet"/>
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="vendor/perfect-scrollbar/perfect-scrollbar.css">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/util.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<link rel="stylesheet" type = "text/css" href = "css/dropdown.css">
<!--===============================================================================================-->
</head>
<body>
	<br>

	<h1 class="main-header"><b>Virginia Solar Energy Revenue Share Inventory</b></h1>

	<br>

	<p class="narrative-text"> In 2020, Virginia passed legislation to offers localities two options to generate revenues from utility-scale solar and energy storage systems. As described in the Code of Virginia section 58.1-3660, the default option is to levy a Machinery and Tools (M&T)/Real Estate 
		tax on capital investments in solar generation facilities. Alternatively, a locality may adopt an ordinance to replace the M&T/Real Estate tax with a Revenue Share arrangement. Under the Revenue Share model, localities receive income from solar facilities at a flat rate in dollars of up to $1,400 
		per megawatt of generation capacity per year.
	</p>

	<br>

	<p class="narrative-text"> Calculating the possible revenue that could be realized under each model is not trivial; to learn more about these options please visit our <a href="https://soltax.coopercenter.org/">SolTax</a> Tool page.
		The table below provides an interactive tool to explore and compare various revenue share ordinances that have been adopted to-date, as permitted by the <a href="https://law.lis.virginia.gov/vacode/title58.1/chapter26/section58.1-2636/">Code of Virginia Section 58.1-2636</a>.
	</p>

	<br>
	
	<p class="narrative-text"> This inventory was generated by research completed by Weldon Cooper Center staff and is current through <b>November 20, 2025</b>. If you have an adopted revenue ordinances to add, please email the Weldon Cooper Center at the contact information found at the bottom of this page.
	</p>

	<br>

	<div class="above-table">
		<div class="search-container">
			<input type="text" id="table-search" class="table-search" onkeyup = "tableSearch();" placeholder="Search table...">
		</div>
		<br>

		<div class="dropdown">
			<button class="btn-lg btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">
				Select Localities
			</button> 
			<ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1" id="select_locality">
				<input type="text" class = "locality-search" id="locality-checkbox" placeholder="Search for Locality..." onkeyup = "localitySearch();" title="Type in Locality">
				<button class = "btn btn-sm btn-success" type="button" id = "toggle_checkboxes" onclick="toggleCheckboxes(event);">Select All</button>
				<locality-dropdown id = "locality-dropdown" class = "dropdown-item">
					<!-- Placeholder to get all localities for dropdown -->
				</locality-dropdown>

			</ul>
		</div>
	</div>
	
	<div class="limiter">
		<div class="container-table100">
			<div class="wrap-table100">
				<div class="table100">
					<table id="data-table">
						<thead>
							<tr class="table100-head">
								<th class="column1" onclick="onColumnHeaderClicked(event)">Locality <span class="arrow">&#11014;</span></th>
								<th class="column2" onclick="onColumnHeaderClicked(event)">Date of Action <span class="arrow">&#11014;</span></th>
								<th class="column3" onclick="onColumnHeaderClicked(event)">Rate Adopted ($/MW) <span class="arrow">&#11014;</span></th>
								<th class="column6" onclick="onColumnHeaderClicked(event)"> Status <span class="arrow">&#11014;</span></th>
								<th class="column6" onclick="onColumnHeaderClicked(event)"> Solar, Storage, or Both <span class="arrow">&#11014;</span></th>
								<th class="column4">Ordinance</th>
								<th class="column5">Other Relevant Links/Notes</th>
							</tr>
						</thead>
						<tbody id = "table-body">
							<!-- Placeholder which gets csv data in through JS -->
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>

<div class="footer">
	<img src="images/ETI_Logo.png" alt="ETI Logo" class="eti-logo">
	<p>Any questions or concerns? Contact Elizabeth Marshall (emm2t@virginia.edu) at the Virginia Solar Intiative.</a></p>
	<p>Created by Thomas Callen and Elizabeth Marshall; edited by Matthew Callen from the <a href="https://energytransition.coopercenter.org/">Energy Transition Initiative</a> team at the <a href="https://coopercenter.org/">Weldon Cooper Center for Public Service</a></p>
</div>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script>
  Papa.parse("Revenue_Share_Data.csv", {
    download: true,
    header: true,
    complete: function(results) {
      const data = results.data;
      const tbody = document.getElementById("table-body");
	  const locality_dropdown = document.getElementById("locality-dropdown")
      tbody.innerHTML = ""; // clear existing rows
	  locality_dropdown.innerHTML = "";

      data.forEach(row => {
        if (!row.Locality) return; // skip empty lines
        const tr = document.createElement("tr");

        tr.innerHTML = `
          <td class="column1">${row["Locality"] || ""}</td>
          <td class="column2">${row["Date of Action"] || ""}</td>
          <td class="column3">${row["Rate Adopted ($/MW)"] || ""}</td>
          <td class="column6">${row["Status"] || ""}</td>
          <td class="column6">${row["Solar Storage or Both"] || ""}</td>
          <td class="column4">${row["Ordinance"] ? `<a href="${row["Ordinance"]}" target="_blank">Link to Ordinance</a>` : ""}</td>
          <td class="column5">${row["Other Relevant Links/Notes"] ? `<a href="${row["Other Relevant Links/Notes"]}" target="_blank">Link</a>` : ""}</td>
        `;
        tbody.appendChild(tr);

		const li = document.createElement("li");
		li.className = "locality-dropdown";
		li.innerHTML = `
		<input class="form-check-input me-1" type="checkbox" value="${row.Locality}" aria-label="${row.Locality}">
		${row.Locality}
		`;
		locality_dropdown.appendChild(li);

		// Attach listener to filter table
		li.querySelector("input").addEventListener("change", function() {
		const checkedLocalities = Array.from(document.querySelectorAll("#locality-dropdown input:checked"))
			.map(cb => cb.value);

		// Show/hide rows based on checked localities
		Array.from(document.querySelectorAll("#table-body tr")).forEach(tr => {
			const localityCell = tr.querySelector(".column1").textContent;
			tr.style.display = checkedLocalities.length === 0 || checkedLocalities.includes(localityCell)
			? ""
			: "none";
		});
		});

      });
    }
  });
</script>

<!--===============================================================================================-->	
	<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<!--===============================================================================================-->
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js" integrity="sha384-SR1sx49pcuLnqZUnnPwx6FCym0wLsk5JZuNx2bPPENzswTNFaQU1RDvt3wT4gWFG" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.min.js" integrity="sha384-j0CNLUeiqtyaRmlzUHCPZ+Gy5fQu0dQ6eZ/xAww941Ai1SxSY+0EQqNXNE6DZiVc" crossorigin="anonymous"></script>
<!--===============================================================================================-->
	<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
<!--===============================================================================================-->
<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.18/js/bootstrap-select.min.js" integrity="sha512-yDlE7vpGDP7o2eftkCiPZ+yuUyEcaBwoJoIhdXv71KZWugFqEphIS3PU60lEkFaz8RxaVsMpSvQxMBaKVwA5xg==" crossorigin="anonymous"></script> -->
	<script src="js/main.js"></script>

</body>
</html>